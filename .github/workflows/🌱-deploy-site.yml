name: ðŸŒ± Deploy Site

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: xmflsct/action-publish-gatsby@v1.0.0 # Uses this action to run further steps
        with:
          publishBranch: "public" # Not required, default publishing branch is master
          token: ${{ secrets.GH_PAT }}
      # - name: Cache node modules
      #   uses: actions/cache@v2
      #   env:
      #     cache-name: ðŸ—³ cache-node-modules
      #   with:
      #     path: |
      #       ~/.npm
      #       **/node_nodules
      #       .cache
      #       public
      #     key: npm-${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}
      #     restore-keys: |
      #       npm-${{ runner.os }}-build-${{ env.cache-name }}-
      #       npm-${{ runner.os }}-build-
      #       npm-${{ runner.os }}-
      # - name: âš¡ Use Node.js 12.x
      #   uses: actions/setup-node@v2-beta
      #   with:
      #     node-version: 12.x
      #     registry-url: https://npm.pkg.github.com/
      #     scope: "@ownername"
      # - uses: bahmutov/npm-install@v1
      # - name: ðŸ“¦ install npm dependencies
      #   run: npm i -g gatsby-cli # && npm install --production
      # - name: ðŸ”¨ gatsby build
      #   run: npm run build
      # - name: âœ¨ Deploy to gh-pages
      #   uses: crazy-max/ghaction-github-pages@v1.3.0
      #   with:
      #     target_branch: gh-pages
      #     build_dir: public
      #   env:
      #     GITHUB_PAT: ${{ secrets.GH_PAT }}
